<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sensors</title>
</head>
<body>

<h4>Current Time: <span id="time" /></h4>
<table>
    <tr>
        <td><span style="font-size: large; font-weight: bold;">Temperature: </span></td>
        <td id="temperature">No data</td>
    </tr>
    <tr>
        <td><span style="font-size: large; font-weight: bold;">Humidity: </span></td>
        <td id="humidity">No data</td>
    </tr>
</table>

<button onclick="switchPin({pin1:1})">Click me</button>


<p id="text">Sample text</p>


<script>

   // setInterval(function(){
     //   getSensorValues()
    //}, 3000);

    //setInterval(function(){
    //    getTime()
    //}, 1000);

    function getTime() {
        document.getElementById('time').innerHTML= new Date().toLocaleString('en-GB')
    }


    function myFunction() {
        document.getElementById("text").innerHTML = "fuck it";
    }

    function switchPin(parameters) {
        console.log('Posted data:' + JSON.stringify(parameters));
        fetch('/pincontrol', {
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            method: 'post',
            body: JSON.stringify(parameters)
        }).then(function(response) {
            return console.log("response" + JSON.stringify(response));
        });
    }


    function getSensorValues() {

        fetch('/sensors')
            .then(function(response) {
                return response.json();
            })
            .then(function(myJson) {

                document.getElementById("temperature").innerHTML = '<span style="font-size: large; font-weight: bold;">' +myJson.temperature.toFixed(2) +'</span>';
                document.getElementById("humidity").innerHTML = '<span style="font-size: large; font-weight: bold;">' +myJson.humidity.toFixed(2) +'</span>';

            });
    }




</script>

</body>
</html>